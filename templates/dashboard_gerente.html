{% extends "base.html" %}

{% block title %}Dashboard do Gerente - Açougue{% endblock %}

{% block head %}
<style>

</style>
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <!-- Cards de resumo -->
    <div class="cards">
        <div class="card">
            <h2>Total de Vendas</h2>
            <p>{{ total_vendas }}</p>
        </div>
        <div class="card">
            <h2>Vendas Hoje</h2>
            <p>{{ vendas_hoje }}</p>
        </div>
        <div class="card">
            <h2>Produtos em Falta</h2>
            <p>{{ total_produtos_falta }}</p>
        </div>
        <div class="card">
            <h2>Receita Mensal</h2>
            <p>R$ {{ receita_mensal }}</p>
        </div>
    </div>

    <!-- Alertas de estoque -->
    <section>
        <h2 style="color: #8B0000; margin-bottom: 1rem;">Produtos com Estoque Baixo</h2>
        <table>
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade</th>
                    <th>Estoque Mínimo</th>
                </tr>
            </thead>
            <tbody>
                {% for produto in alertas_estoque %}
                <tr>
                    <td>{{ produto.nome }}</td>
                    <td>{{ produto.quantidade }}</td>
                    <td>{{ produto.estoque_minimo }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="3" style="text-align:center;">Nenhum alerta</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <!-- Ranking de produtos -->
    <section>
        <h2 style="color: #8B0000; margin-bottom: 1rem;">Top 5 Produtos Mais Vendidos</h2>
        <table>
            <thead>
                <tr>
                    <th>Produto</th>
                    <th>Quantidade Vendida</th>
                </tr>
            </thead>
            <tbody>
                {% for item in ranking_produtos %}
                <tr>
                    <td>{{ item.nome }}</td>
                    <td>{{ item.quantidade_vendida }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="2" style="text-align:center;">Sem dados</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</div>
{% endblock %}